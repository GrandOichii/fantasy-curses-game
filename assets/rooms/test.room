########
#N     #
#0    D#
#C     #
########
---
visible_range=100
---
D D door index testing
N @ script_tile Oskar npc_script
C # hidden_tile is_friends C chest chests_test_friend_chest
0 space pressure_plate do_the_thing
---
_load:
set npc_name "Oskar"
if set bat then unset bat

npc_script:
set _say_name npc_name
if set is_friends then run already_talked_to
say Yes_No "Do you like pizza?"
if _reply == "Yes" then run become_friends
if _reply == "No" then run become_enemy

already_talked_to:
if is_friends == true then run friend_talk
if is_friends == false then say Bye... "Begone, pizza-hater."
stop

friend_talk:
say Hi! "Hello, friend!"
if not chests_test_friend_chest.length == 0 then say Ok "Don't be shy, I don't need the stuff in the chest anyway"

become_friends:
say Cool! "Yay! You are my friend now"
say Thanks! "Here, I'll let you take stuff from my chest"
set is_friends true
stop

become_enemy:
say Sure... "What. I can't be friends with you."
set is_friends false
stop

do_the_thing:
if set bat then stop
set bat true
sleep 500
move camera 0 -3
sleep 500
move camera 0 -3
sleep 500
set _say_name player.name
sleep 500
say ... "Thats weird."
sleep 500
move camera 0 3
sleep 500
move camera 0 3
---
chests_test_friend_chest:
Iron Helmet
Iron Armor
Iron Leggins
---
